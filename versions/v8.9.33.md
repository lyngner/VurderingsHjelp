
# Oppdatering v8.9.33 - Newline Normalization Fix

Denne oppdateringen l√∏ser kritiske feil med "Misplaced &" i matematikkblokker, for√•rsaket av mangelfull h√•ndtering av linjeskift fra KI-responser.

### üõ°Ô∏è Kritiske endringer:

1.  **Newline Normalization (Fiks)**:
    *   **Problemet:** KI-en returnerer ofte tekst med bokstavelige `\n` tegn (to tegn: backslash + n) i stedet for faktiske linjeskift. "Vaskemaskinen" (`sanitizeLatex`) som skal fjerne tomme linjer i `aligned`-milj√∏er brukte regex som kun s√• etter *faktiske* linjeskift.
    *   **Konsekvensen:** Tomme linjer (som er ulovlige i MathJax `aligned`) ble ikke fjernet, men konvertert til faktiske tomme linjer helt til slutt. Dette fikk MathJax til √• tro at matteblokken var slutt, og deretter krasje p√• neste `&`-tegn.
    *   **L√∏sningen:** Systemet normaliserer n√• ALLE linjeskift (b√•de `\n` og faktiske) helt i starten av saniteringsprosessen.
    *   **Resultat:** Koden som rydder opp i `aligned`-blokker ser n√• de tomme linjene og fjerner dem korrekt *f√∏r* matematikken sendes til visning.

2.  **Robusthet**:
    *   Dette sikrer at lange, luftige utregninger (som i eksempelet med logaritmelikningen) vises korrekt uten gule feilbokser.

### Teknisk:
*   Oppdatert `sanitizeLatex` i `components/SharedUI.tsx` til √• kj√∏re `.replace(/\\n/g, '\n')` som f√∏rste steg.
*   Systemversjon: **v8.9.33**.
