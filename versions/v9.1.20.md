
# Oppdatering v9.1.20 - Strict Escape & LaTeX Repair

Denne oppdateringen l√∏ser "Missing \end{aligned}" og andre visuelle feil som skyldtes at JSON-parseren feilaktig tolket LaTeX-kommandoer som kontrolltegn.

### üõ°Ô∏è Kritiske Feilrettinger:

1.  **Total JSON Escape (Isolation)**:
    *   **Problemet:** Tidligere whitelistet jeg `\n`, `\t` og `\r` fra √• bli escapet. Dette gjorde at `\text{...}` ble tolket som `[TAB]ext{...}`, og `\right` ble `[RETURN]ight`.
    *   **L√∏sningen:** Jeg har fjernet alle unntak. N√• escapes **alle** backslasher unntatt `"` og `\uXXXX`. 
    *   **Resultat:** `\text` blir til `\\text` i JSON, som parses korrekt til `\text` i minnet.

2.  **`\b` Artifact Removal**:
    *   **Problemet:** KI-en returnerte av og til `\b\begin` (sannsynligvis en hallusinasjon av "bold" kommando eller en skrivefeil). Min tidligere kode ignorerte dette.
    *   **L√∏sningen:** `LatexRenderer` har f√•tt en spesifikk regel som fjerner `\b` hvis den st√•r rett foran `\begin`. Dette gj√∏r `\b\begin` om til `\begin`, som MathJax forst√•r.

### Teknisk:
*   Oppdatert `cleanJson` i `geminiService.ts`.
*   Oppdatert `sanitizeLatex` i `SharedUI.tsx`.
*   Systemversjon: **v9.1.20**.
