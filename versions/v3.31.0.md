
# Oppdatering v3.31.0 - Kontekstuell Rettemanual

Denne oppdateringen løser regresjonen der manualen ikke ble generert automatisk, og innfører en smartere genereringsmetode.

### Endringer:
*   **Automatisk Generering (Fikset)**: Manualen trigges nå korrekt umiddelbart etter at oppgavefiler er ferdig prosessert.
*   **Elev-Kontekst i Manualen**: Hvis elevbesvarelser er lastet inn og kontrollert, vil en regenerering av manualen inkludere elevenes svar. Dette gjør at KI-en kan identifisere faktiske "vanlige feil" og justere retteveiledningen deretter.
*   **Arkitektur-Dokumentasjon**: README er oppdatert med en "Hvordan det virker"-seksjon for å hindre fremtidige regresjoner.

### Teknisk Gjennomføring (Hvordan):
*   **Asynkron håndtering**: Endret `handleTaskFileSelect` i `useProjectProcessor.ts` til å sende det ferdigstilte `updatedProject`-objektet som et argument til `handleGenerateRubric`. Dette omgår problemet med at Reacts asynkrone state-oppdatering ikke skjer fort nok for den påfølgende funksjonen.
*   **Kontekst-Injisering**: Oppdatert `generateRubricFromTaskAndSamples` i `geminiService.ts` til å ta imot en streng med elev-eksempler. Prompten er justert for å prioritere populering av `commonErrors`-feltet basert på disse eksemplene.
*   **State-sikring**: Bruker nå `setActiveProject` med en callback-funksjon i generatoren for å sikre at ingen prosjektdata går tapt under lagring av manualen.
